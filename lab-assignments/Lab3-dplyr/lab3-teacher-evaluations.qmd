---
title: "Lab 3: Teacher Evaluations"
format: 
  html: 
    embed-resources: true
    code-tools: true
    toc: true
editor: source
execute: 
  echo: true
  warning: false
  message: false
---

[Download starter .qmd file](lab3-teacher-evaluations.qmd)

[Download `teacher_evals.csv`](teacher_evals.csv)

::: callout-warning
Save **both** your .qmd file and your data set in the same folder within your Stat 331 directory! **DO NOT** open your .qmd file straight from your downloads folder.
:::

::: {.callout-tip collapse="true"}
-   The first chunk of your Quarto document should be to *load your libraries* (probably only `tidyverse` for now).
-   The second chunk of your Quarto document should be to *import in your data* (using the `here()` function!).
-   Make sure you address **all the questions** in these instructions.
-   If a question requires **any** type of calculation, **you should provide code for your answer!**
-   I have provided hints about functions that might be useful to you. You are **not required** to use these functions.
-   You may have to Google to solve some of these!
-   Be sure to **save** your work regularly (`Ctrl/Cmd + S` or `File > Save` or the floppy disk icon)
-   Be sure to **render** your file every so often, to check for errors and make sure it looks nice.
    -   Make your Quarto document does not contain `View(dataset)` or `install.packages("package")`, both of these will prevent rendering.
    -   Check your Quarto document for moments when you looked at the data by typing the name of the data frame. Leaving these in means the whole data set will print out and this looks unprofessional.
    -   If all else fails, you can set your execution options to `error: true`, which will allow the file to render even if errors are present.
:::

### Data Set

The data set `teacher_evals.csv` contains Student Evaluations of Teaching (SET) ratings provided by students of one university in Poland at the end of the winter semester of the 2020/2021 academic year. The SET questionnaire used by this university is:

> Evaluation survey of the teaching staff of [university name]
>
> Please, complete the following evaluation form, which aims to assess the lecturer’s performance. Only one answer should be indicated for each question. The answers are coded in the following way: 5- I strongly agree; 4- I agree; 3- Neutral; 2- I don’t agree; 1- I strongly don’t agree.
>
> Question 1. I learnt a lot during the course. 
>
> Question 2. I think that the knowledge acquired during the course is very useful.
>
> Question 3. The professor used activities to make the class more engaging.
>
> Question 4. If it was possible, I would enroll for the course conducted by this lecturer again. 
>
> Question 5. The classes started on time.
>
> Question 6. The lecturer always used time efficiently.
>
> Question 7. The lecturer delivered the class content in an understandable and efficient way.
>
> Question 8. The lecturer was available when we had doubts.
>
> Question 9. The lecturer treated all students equally regardless of their race, background and ethnicity.

The data set covers all SET surveys filled by students in all fields and levels of study offered by the university. In the period of data collection, the university was entirely in the online regime amid the Covid-19 pandemic. While the expected learning outcomes formally have not been changed, the online mode of study could have affected the grading policy and could have implications for some of the studied SET biases. The average SET scores were matched with the characteristics of the teacher for degree, seniority, gender, and SET scores in the past six semesters; the course characteristics for time of day, day of the week, course type, course breadth, class duration, and class size; the attributes of the SET survey responses as the percentage of students providing SET feedback; and the grades of the course for the mean, standard deviation, and percentage failed. Data on course grades are also available for the previous six semesters. This rich data set allows many of the biases reported in the literature to be tested for and new hypotheses to be formulated.          

Before tackling the problems, study the description of each variable [here](https://earobinson95.github.io/stat331-calpoly/lab-assignments/Lab3-dplyr/teacher_evals_codebook.pdf).

*journal, Under blind review in refereed. University SET data, with faculty and courses characteristics. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2021-09-12.* <https://doi.org/10.3886/E149801V1>

**1. Load the appropriate R packages and import the data set, `teacher_evals`.**

```{r}
# code chunk for loading packages and importing the data

```

### Summary

**2. Provide a brief overview (2-4 sentences) of the data set.**

::: callout-note
It is always good practice to start an analysis by getting a feel for the data and providing a quick summary for readers. You do not need to show any source code for this question, although you probably want to use code to get some information about the data set (e.g., `summary(data)`, `glimpse(data)`, `dim(data)`, etc.). Things to think about -- where did the data come from? what sort of data is collected (context and data type)? how much data do you have? etc.
:::

```{r}
# you may want to use code to answer this question, but you should also provide 2-4 sentences in text/paragraph format.

```

**3. What is the unit of observation (i.e. a single row in the data set) identified by?**

::: callout-warning
It is not one teacher per row! It's also not just one class per row!
:::


**4. Clean the data set in whichever ways you see fit. This might mean adjusting *variable type*, for example, is the instructor a numeric data type? How do you want to deal with missing data? Assign your cleaned data set to a new data set named `teacher_evals_clean` -- use this data set going forward.**

::: callout-tip
Helpful functions: `mutate()`, `as.factor()`

It would be most efficient to use `across()` in combination with `mutate()` to complete this task.
:::

```{r}
# code chunk for Q4

```

**5. Rename the variable "gender" to indicate "sex_at_birth".**

::: callout-tip
Helpful functions: `rename()``
:::

```{r}
# code chunk for Q5

```

**6. How many unique instructors were evaluated in this data set?**

::: callout-tip
Helpful functions: `distinct()`, `count()`
:::

```{r}
# code chunk for Q6

```

**6. To simplify your data, make a new variable that re-categorizes `time_of_day` into three groups, "morning" -- "<10" "day" -- "10-14" and "14-18", and "evening -- ">18".**

::: callout-tip
Helpful functions: `mutate()`, `case_when()`
:::

```{r}
# code chunk for Q7

```

**7. What are the demographics of the instructors in this study? Investigate the variables `academic_degree`, `seniority`, and `sex_at_birth` and summarize your findings in 1-3 complete sentences.**

::: callout-tip
You'll need to first manipulate your data to have each instructor represented only once.

Helpful functions: `select()`, `distinct(___, .keep_all = TRUE)`, `count()`, `summary()`
:::

```{r}
# code chunk for Q8

```

**8. Make one plot to display the demographic information of the subjects in this study.**

::: callout-note
You do not need to discuss these plots, but make sure they are appropriate to the data types and have informative titles and axis labels. Your plot should include all three variables at once. Use the skills you learned in Week 2 to design and enhance your plots! What will your aesthetics be? What geometric objects are appropriate for the data types? Will you use facetting?
:::

```{r}
# code chunk for Q9

```

### Rate my Professor

For each demographic group and survey question specified below, determine which class(es) in this study was(were) the highest **and** lowest rated, on average.

::: callout-tip
Helpful functions: `filter()`, `group_by()`, `summarize()`, `slice()`

Useful variables: `course_id`, `SET_score_avg`, `academic_degree`, `seniority`, `sex_at_birth`
:::

**11. Which courses overall had the highest and lowest average rating for Question 3 (The professor used activities to make the class more engaging)?**

```{r}
# code chunk for Q10

```

**12. Which courses taught by instructors with over 6 years of experience had the highest and lowest average rating for Question 3 (The professor used activities to make the class more engaging)?**

```{r}
# code chunk for Q11

```

**13. Which courses taught by females with either a Doctorate ("dr") or Professor ("prof") academic degree had the highest and lowest average rating for Question 3 (The professor used activities to make the class more engaging)?**

```{r}
# code chunk for Q12

```

## Conducting Statistical Analyses (Chi-square Test of Independence)

::: callout-tip
#### Refresher on one-way ANOVA

While a second course in statistics is a pre-requisite for this class, you may visit <https://openintro-ims.netlify.app/inference-tables#inference-tables> for a refresher on Chi-square test of independence 
:::

Let's compare the level of SET ratings for Question 7 (The lecturer delivered the class content in an understandable and efficient way) between males and females.

**14. Create a new data set `teacher_eval_comparisons` that accomplishes the following with one pipeline. (1) Includes responses for Question 7 only, (2) creates a new variable called `SET_level` that is "low" if the `SET_score_avg` is lower than 3 and "high" otherwise, and (3) contains only the variables we are interested in -- `course_id`, `SET_score_avg`, `SET_level`, and `sex_at_birth`.**

::: callout-tip
Helpful functions: `filter()`, `mutate()`, `if_else()`, `select()`
:::

```{r}
# code chunk for Q14

```

**15. Using the new data set and your new ggplot2 skills, recreate the filled bar plot shown below.**

::: callout-tip
Helpful geometric object and arguments: `geom_bar(stat = ..., position = ...)`
:::

```{r}
# code chunk for Q15

```


**16. Look up the documentation for `chisq.test()` to carry out a chi-square test of independence between the SET level and instructor sex at birth in your new data set.**

```{r}
# code chunk for Q16

```

